<!DOCTYPE html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <style>
body {
    background-color: #ccc;
    font-size: 1.1em;
    margin: 0;
    padding: 0;
    text-align: center;
}
h1 {
    font-size: 2em;
}
#a_base, #b_base {
    width:2em;
}
select {
    width:10em;
}
textarea {
    display: block;
    margin: 1em auto;
}
    </style>
    <title>n進数計算機</title>
  </head>
  <body>
    <main>
        <h1>n進数計算機</h1>
        <div>a : 
            <input type="number" id="a_base" placeholder="10">進数の
            <input id="a_number" placeholder="1">と
        </div>
        <div>b : 
            <input type="number" id="b_base" placeholder="10">進数の
            <input id="b_number" placeholder="1">を
        </div>
        <select id="mode">
            <option value="a+b">a+b</option>
            <option value="a-b">a-b</option>
            <option value="a*b">a*b</option>
            <option value="a/b">a/b</option>
            <option value="a^b">a^b</option>
            <option value="a!">a!</option>
            <option value="aPb">aPb</option>
            <option value="aCb">aCb</option>
            <option value="|a|">|a|</option>
            <option value="(a√)b">(a√)b</option>
        </select>
        <button id="run">計算!</button>
        <textarea id="resultOutput" placeholder="計算結果"></textarea>
    </main>
    <script>
const factorial = a => {
    let result = 1;
    for (let i=1; i<=a; i++) result *= i; 
    return result;
}
const calculate = (a, b, mode) => {
    switch (mode) {
       case "a+b" : return a+b
       case "a-b" : return a-b
       case "a*b" : return a*b
       case "a/b" : return a/b
       case "a^b" : return a**b
       case "a!" : return factorial(a)
       case "aPb" : return factorial(a) / factorial(a-b)
       case "aCb" : return factorial(a) / factorial(a-b) / factorial(b)
       case "|a|" : return Math.abs(a)
       case "(a√)b" : return b**(1/a)
    }
}
const a_number = document.getElementById("a_number");
const b_number = document.getElementById("b_number");
const a_base = document.getElementById("a_base");
const b_base = document.getElementById("b_base");
const run = document.getElementById("run");
const resultOutput = document.getElementById("resultOutput");
run.addEventListener("click", () => {
    resultOutput.value = calculate(parseInt(a_number.value||"1", Math.min(Math.max(a_base.value||10,2),36)), parseInt(b_number.value||"1", Math.min(Math.max(b_base.value||10,2),36)), mode.value)
});
    </script>
  </body>
</html>
